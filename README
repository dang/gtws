GateD Testing Workspaces

- Setup Overview
	- Checkout gtws
		git clone ssh://git@buildbot.aa.ghs.com/home/git/gtws.git
	- Set up your ${HOME}/.gtwsrc
		- Should include GTWS_ORIGIN, GTWS_BASE_WORKDIR, optionally GTWS_SETPROMPT
	- Add the repo directory to your path
		export PATH="${PATH}:/path/to/gtws
	- Profit

- Configuration
	Configuration is via cascading .gtwsrc files.  The real path down from
	the root is walked, and each .gtwsrc file found is sourced in turn.
	More specific files oveeride less specific ones.

	Here are some settings that must be set somewhere in the tree:

	- GTWS_GATED_VERSION
		- This should contain a valid GateD version name.
	- GTWS_DEFAULT_RTOS
		- Default RTOS version for new workspaces
	- GTWS_SUPP_RTOS
		- Supported RTOS versions for new workspace

	Here are optional settings.

	- GTWS_ORIGIN
		- This sets the location of the origin git trees.  Defaults to $HOME/origin
	- GTWS_SETPROMPT
		- This is optional.  If set, the shell prompt will be changed
		  to have the workspace name in it.
	- GTWS_BASE_WORKDIR
		- This sets the base of the working directories for GATT.  Each
		  workspace will have it's own directory in here based on it's
		  name.
	- GTWS_COMPILER_PATH
		- The path to a GHS compiler.  If not given, it defaults to a
		  sane value based on the integrity version

- Origin dirs
	GTWS_ORIGIN (in most scripts) points to the prestine git checkouts to
	pull from and push to.  For me, the GateD/Gatt checkouts are git svn
	clones, the RTOS checkouts are clones from buildbot's repos.

	- Layout
		- /dmltools
			- git svn clone of http://rtosvc.ghs.com/trunk/rtos/INTEGRITY-docs/dmltools
			- Necessary because git doesn't do externals
		- i<version>
			- RTOS versions
			- itrunk, i11.0, i5.0, i5.0-vrf
			- Must start with 'i' for scripts to work
		- GateD versions
			- 3.1, 3.2, 3.3, trunk
			- Each contains:
				- /docs
					- git svn clone gated-docs/<version>
				- /gatt
					- git svn clone gated-tools/<version>
				- /routing
					- git svn clone gated/<version>
			- Each clone needs set in .git/config:
				[receive]
				        denyCurrentBranch = warn

- Workflow
	- Need new workspace for ROUTE-2222 on gtrunk itrunk
		- cd ~/src/trunk
		- mkws r2222
			- gvsersion comes from PWD
			- iversion defaults to
				- itrunk for gtrunk
				- i11.0 for 3.3
				- i10.0 for 3.2
				- i5.0 for 3.1
			- Makes in $PWD:
				- /docs
				- /gatt
				- /itrunk
				- /routing
			- All checkouts have .git/info/exclude copied
			- routing and gatt have tags made
			- All RTOS checkoutes have routing symlinked and ./setup run
		- startws r2222
			- Sets up environment
			- changes prompt
		- cd routing
			- Goes to gated
		- Make changes; commit
		- cd gatt/autobot
			- Goes to gatt/autobot
		- autobot ospf 26,27,28,60
			- Runs ospf tests on racks
		- Push
			- cd routing
			- wspush
				- This does:
				- git push
				- cd ${GTWS_ORIGIN}/${GTWS_GATED_VERSION}/routing
				- git reset --hard
				- git svn dcommit
				- cd -
		- Update origin
			- origin
				- Updates all gated/gatt/docs versions
			- origin -r
				- Updates all rtos as well
			- origin trunk
				- Updates just gated/gatt/docs trunk
		- Update gated checkout from origin
			- cdws routing
			- git pull --rebase
			- Must be done after "git svn dcommit" from origin if
			  workspace is to be used again
		- Done with workspace
			- rmws g2222
			- Removes working dirs as well
